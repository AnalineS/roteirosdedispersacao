"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{5538:function(e,n,i){i.r(n),i.d(n,{FallbackIndicator:function(){return c},SystemHealthWarning:function(){return l}});var o=i(7437),a=i(29),s=i.n(a),t=i(2265),r=i(5121);let c=e=>{var n;let{isActive:i,result:a,systemHealth:c="good",attempts:l=0,showDetails:d=!1,onRetry:m,onDismiss:p}=e,[u,f]=(0,t.useState)(!1);if(!i&&!a)return null;let g=()=>"critical"===c?r.rS.colors.danger[500]:"degraded"===c?r.rS.colors.warning[500]:(null==a?void 0:a.source)==="emergency"?r.rS.colors.danger[500]:(null==a?void 0:a.source)==="cache"?r.rS.colors.success[500]:(null==a?void 0:a.source)==="local_knowledge"?r.rS.colors.primary[500]:r.rS.colors.neutral[400],y=()=>i&&!a?"Ativando fallback...":"critical"===c?"Sistema cr\xedtico":"degraded"===c?"Sistema degradado":(null==a?void 0:a.source)==="emergency"?"Resposta de emerg\xeancia":(null==a?void 0:a.source)==="cache"?"Resposta do cache":(null==a?void 0:a.source)==="local_knowledge"?"Base local":"Sistema de fallback";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s(),{id:"8a556b003523cc80",dynamic:[i&&!a?"pulse 2s infinite":"none"],children:"@-webkit-keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@-moz-keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@-o-keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@-webkit-keyframes spin{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.fallback-indicator.__jsx-style-dynamic-selector{-webkit-animation:".concat(i&&!a?"pulse 2s infinite":"none",";-moz-animation:").concat(i&&!a?"pulse 2s infinite":"none",";-o-animation:").concat(i&&!a?"pulse 2s infinite":"none",";animation:").concat(i&&!a?"pulse 2s infinite":"none","}.fallback-spinner.__jsx-style-dynamic-selector{-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite}")}),(0,o.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 12px",borderRadius:"16px",backgroundColor:r.rS.colors.neutral[50],border:"2px solid ".concat(g()),color:g(),fontSize:"0.8rem",fontWeight:500,cursor:d?"pointer":"default",transition:"all 0.3s ease",position:"relative",maxWidth:"280px"},onClick:()=>d&&f(!u),role:d?"button":"status","aria-label":y(),className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]])+" fallback-indicator",children:[(0,o.jsx)("span",{style:{fontSize:"1rem"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]])+" "+((i&&!a?"fallback-spinner":"")||""),children:i&&!a?"\uD83D\uDD04":"critical"===c?"\uD83D\uDEA8":"degraded"===c?"⚠️":(null==a?void 0:a.source)==="emergency"?"\uD83C\uDD98":(null==a?void 0:a.source)==="cache"?"\uD83D\uDCBE":(null==a?void 0:a.source)==="local_knowledge"?"\uD83D\uDCDA":"\uD83D\uDEE1️"}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",minWidth:0,flex:1},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:[(0,o.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:y()}),a&&(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"0.7rem",opacity:.8},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:[(0,o.jsxs)("span",{className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:["Confian\xe7a: ",Math.round(100*a.confidence),"%"]}),l>1&&(0,o.jsxs)("span",{className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:["| Tentativa ",l]})]})]}),a&&(m||p)&&(0,o.jsxs)("div",{style:{display:"flex",gap:"4px",marginLeft:"8px"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:[m&&(0,o.jsx)("button",{onClick:e=>{e.stopPropagation(),m()},style:{background:"none",border:"none",color:g(),cursor:"pointer",fontSize:"0.8rem",padding:"2px 4px",borderRadius:"4px",opacity:.7,transition:"opacity 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.opacity="1",onMouseLeave:e=>e.currentTarget.style.opacity="0.7",title:"Tentar novamente",className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:"\uD83D\uDD04"}),p&&(0,o.jsx)("button",{onClick:e=>{e.stopPropagation(),p()},style:{background:"none",border:"none",color:g(),cursor:"pointer",fontSize:"0.8rem",padding:"2px 4px",borderRadius:"4px",opacity:.7,transition:"opacity 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.opacity="1",onMouseLeave:e=>e.currentTarget.style.opacity="0.7",title:"Dispensar",className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:"✕"})]}),d&&u&&a&&(0,o.jsxs)("div",{style:{position:"absolute",bottom:"100%",left:"0",right:"0",marginBottom:"8px",padding:"12px",backgroundColor:"white",border:"1px solid ".concat(r.rS.colors.neutral[200]),borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"0.75rem",zIndex:1001,minWidth:"300px"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:[(0,o.jsxs)("div",{style:{marginBottom:"8px"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:[(0,o.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:"Resposta de Fallback:"}),(0,o.jsxs)("div",{style:{marginBottom:"6px"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:["Fonte: ",(0,o.jsx)("span",{style:{color:g(),fontWeight:"bold"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:"cache"===a.source?"Cache Local":"local_knowledge"===a.source?"Base de Conhecimento":"emergency"===a.source?"Sistema de Emerg\xeancia":"Gen\xe9rico"})]}),(0,o.jsxs)("div",{style:{marginBottom:"6px"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:["Confian\xe7a: ",(0,o.jsxs)("span",{style:{color:(n=a.confidence)>.7?r.rS.colors.success[500]:n>.4?r.rS.colors.warning[500]:r.rS.colors.danger[500],fontWeight:"bold"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:[Math.round(100*a.confidence),"%"]})]}),l>1&&(0,o.jsxs)("div",{style:{marginBottom:"6px"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:["Tentativas: ",l]})]}),a.suggestion&&(0,o.jsxs)("div",{style:{marginBottom:"8px"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:[(0,o.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:"Sugest\xe3o:"}),(0,o.jsx)("div",{style:{color:r.rS.colors.neutral[600],fontStyle:"italic"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:a.suggestion})]}),a.emergency_contact&&(0,o.jsxs)("div",{className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:[(0,o.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:"Contato de Emerg\xeancia:"}),(0,o.jsx)("div",{style:{color:r.rS.colors.danger[600],fontWeight:"bold"},className:s().dynamic([["8a556b003523cc80",[i&&!a?"pulse 2s infinite":"none"]]]),children:a.emergency_contact})]})]})]})]})},l=e=>{let{systemHealth:n,onResetFailures:i}=e;if("good"===n)return null;let a="critical"===n;return(0,o.jsxs)("div",{style:{padding:"12px 16px",backgroundColor:a?r.rS.colors.danger[50]:r.rS.colors.warning[50],border:"1px solid ".concat(a?r.rS.colors.danger[200]:r.rS.colors.warning[200]),borderRadius:"8px",margin:"8px 0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,o.jsx)("span",{style:{fontSize:"1.2rem"},children:a?"\uD83D\uDEA8":"⚠️"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontWeight:"bold",color:a?r.rS.colors.danger[700]:r.rS.colors.warning[700],fontSize:"0.9rem"},children:a?"Sistema Cr\xedtico":"Sistema Degradado"}),(0,o.jsx)("div",{style:{fontSize:"0.8rem",color:a?r.rS.colors.danger[600]:r.rS.colors.warning[600]},children:a?"M\xfaltiplas falhas detectadas. Usando apenas respostas de emerg\xeancia.":"Instabilidade detectada. Usando fallbacks quando necess\xe1rio."})]})]}),i&&(0,o.jsx)("button",{onClick:i,style:{padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:a?r.rS.colors.danger[600]:r.rS.colors.warning[600],color:"white",fontSize:"0.8rem",cursor:"pointer",fontWeight:"bold"},children:"Reset"})]})};n.default=c}}]);