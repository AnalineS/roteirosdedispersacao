"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{824:function(e,t,o){o.r(t),o.d(t,{default:function(){return s}});var r=o(7437),n=o(2265),i=o(319);function s(e){let{conversations:t,currentConversationId:o,personas:s,onConversationSelect:l,onNewConversation:d,onDeleteConversation:a,onRenameConversation:p,isVisible:x,onToggle:c}=e,[u,h]=(0,n.useState)(null),[f,g]=(0,n.useState)(""),[m,b]=(0,n.useState)(null),[y,v]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=()=>{v(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let k=e=>{let t=Date.now()-e,o=Math.floor(t/6e4),r=Math.floor(t/36e5),n=Math.floor(t/864e5);return o<1?"agora":o<60?"".concat(o,"min"):r<24?"".concat(r,"h"):n<30?"".concat(n,"d"):new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})},S=e=>{h(e.id),g(e.title)},z=()=>{u&&f.trim()&&p(u,f.trim()),h(null),g("")},C=()=>{h(null),g("")},D=(0,n.useMemo)(()=>t.reduce((e,t)=>{let o=t.personaId;return e[o]||(e[o]=[]),e[o].push(t),e},{}),[t]),B=(0,n.useCallback)(e=>{d(e)},[d]),E=(0,n.useCallback)(e=>{l(e)},[l]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:c,style:{position:"fixed",top:y?"70px":"80px",left:x?y?"calc(85vw - 48px)":"290px":y?"15px":"20px",zIndex:1003,background:"#1976d2",color:"white",border:"none",borderRadius:"50%",width:"44px",height:"44px",fontSize:"1.1rem",cursor:"pointer",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)",transition:"all 0.3s ease",touchAction:"manipulation"},onMouseEnter:e=>{y||(e.currentTarget.style.transform="scale(1.1)",e.currentTarget.style.boxShadow="0 6px 20px rgba(25, 118, 210, 0.4)")},onMouseLeave:e=>{y||(e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 12px rgba(25, 118, 210, 0.3)")},children:x?"✕":"\uD83D\uDCAC"}),(0,r.jsxs)("div",{style:{position:"fixed",top:0,left:x?0:y?"-100%":"-320px",width:y?"85vw":"320px",maxWidth:"320px",height:"100vh",background:"white",borderRight:"1px solid #e0e0e0",boxShadow:"2px 0 10px rgba(0,0,0,0.1)",zIndex:1002,transition:"left 0.3s ease",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,r.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderBottom:"1px solid #e0e0e0"},children:[(0,r.jsx)("h3",{style:{margin:0,fontSize:"1.2rem",color:"#333",display:"flex",alignItems:"center",gap:"8px"},children:"\uD83D\uDCAC Conversas"}),(0,r.jsxs)("p",{style:{margin:"5px 0 0 0",fontSize:"0.85rem",color:"#666"},children:[t.length," conversa",1!==t.length?"s":""]})]}),(0,r.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"10px 0"},children:[Object.entries(D).map(e=>{let[t,n]=e,l=s[t];return l?(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsxs)("div",{style:{padding:"10px 20px",display:"flex",alignItems:"center",gap:"10px",background:"#f5f7fa",borderBottom:"1px solid #e8eaf0"},children:[(0,r.jsx)(i.Z,{persona:l,personaId:t,size:"small"}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#333"},children:l.name}),(0,r.jsxs)("div",{style:{fontSize:"0.75rem",color:"#666"},children:[n.length," conversa",1!==n.length?"s":""]})]}),(0,r.jsx)("button",{onClick:()=>B(t),style:{background:"none",border:"none",color:"#1976d2",cursor:"pointer",fontSize:"1.2rem",padding:"4px",borderRadius:"4px"},title:"Nova conversa",children:"+"})]}),n.map(e=>(0,r.jsx)("div",{style:{padding:"12px 20px",borderBottom:"1px solid #f0f0f0",cursor:"pointer",background:e.id===o?"#e3f2fd":"transparent",borderLeft:e.id===o?"4px solid #1976d2":"4px solid transparent",position:"relative"},onMouseEnter:()=>b(e.id),onMouseLeave:()=>b(null),onClick:()=>E(e.id),children:u===e.id?(0,r.jsx)("div",{style:{display:"flex",gap:"5px"},children:(0,r.jsx)("input",{type:"text",value:f,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&z(),"Escape"===e.key&&C()},onBlur:z,autoFocus:!0,style:{flex:1,padding:"4px 8px",border:"1px solid #1976d2",borderRadius:"4px",fontSize:"0.9rem"}})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:e.id===o?"600":"normal",color:"#333",marginBottom:"4px",wordBreak:"break-word"},children:e.title}),(0,r.jsx)("div",{style:{fontSize:"0.75rem",color:"#666",marginBottom:"4px",wordBreak:"break-word"},children:e.lastMessage}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("span",{style:{fontSize:"0.7rem",color:"#999"},children:k(e.lastActivity)}),(0,r.jsxs)("span",{style:{fontSize:"0.7rem",color:"#999",background:"#f0f0f0",padding:"2px 6px",borderRadius:"10px"},children:[e.messageCount," msg"]})]}),m===e.id&&(0,r.jsxs)("div",{style:{position:"absolute",top:"8px",right:"8px",display:"flex",gap:"4px"},children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),S(e)},style:{background:"white",border:"1px solid #ddd",borderRadius:"4px",padding:"4px 6px",fontSize:"0.7rem",cursor:"pointer"},title:"Renomear",children:"✏️"}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),confirm("Deseja excluir esta conversa?")&&a(e.id)},style:{background:"white",border:"1px solid #ddd",borderRadius:"4px",padding:"4px 6px",fontSize:"0.7rem",cursor:"pointer",color:"#d32f2f"},title:"Excluir",children:"\uD83D\uDDD1️"})]})]})},e.id))]},t):null}),0===t.length&&(0,r.jsxs)("div",{style:{padding:"40px 20px",textAlign:"center",color:"#666"},children:[(0,r.jsx)("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:"\uD83D\uDCAC"}),(0,r.jsx)("p",{children:"Nenhuma conversa ainda"}),(0,r.jsx)("p",{style:{fontSize:"0.85rem",margin:0},children:"Comece uma nova conversa selecionando uma persona"})]})]})]}),x&&y&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",zIndex:1001,touchAction:"none"},onClick:c})]})}}}]);