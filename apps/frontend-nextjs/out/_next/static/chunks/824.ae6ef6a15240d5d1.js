"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{824:function(e,t,r){r.r(t),r.d(t,{default:function(){return s}});var o=r(7437),n=r(2265),i=r(319);function s(e){let{conversations:t,currentConversationId:r,personas:s,onConversationSelect:d,onNewConversation:l,onDeleteConversation:a,onRenameConversation:p,isVisible:x,onToggle:c}=e,[u,f]=(0,n.useState)(null),[g,h]=(0,n.useState)(""),[m,b]=(0,n.useState)(null),[y,v]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=()=>{v(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let k=e=>{let t=Date.now()-e,r=Math.floor(t/6e4),o=Math.floor(t/36e5),n=Math.floor(t/864e5);return r<1?"agora":r<60?"".concat(r,"min"):o<24?"".concat(o,"h"):n<30?"".concat(n,"d"):new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})},S=e=>{f(e.id),h(e.title)},z=()=>{u&&g.trim()&&p(u,g.trim()),f(null),h("")},D=()=>{f(null),h("")},C=t.reduce((e,t)=>{let r=t.personaId;return e[r]||(e[r]=[]),e[r].push(t),e},{});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:c,style:{position:"fixed",top:"80px",left:x?"320px":"20px",zIndex:1001,background:"#1976d2",color:"white",border:"none",borderRadius:"50%",width:"48px",height:"48px",fontSize:"1.2rem",cursor:"pointer",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.1)",e.currentTarget.style.boxShadow="0 6px 20px rgba(25, 118, 210, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 12px rgba(25, 118, 210, 0.3)"},children:x?"✕":"\uD83D\uDCAC"}),(0,o.jsxs)("div",{style:{position:"fixed",top:0,left:x?0:"-320px",width:"320px",height:"100vh",background:"white",borderRight:"1px solid #e0e0e0",boxShadow:"2px 0 10px rgba(0,0,0,0.1)",zIndex:1e3,transition:"left 0.3s ease",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{padding:"20px",background:"#f8f9fa",borderBottom:"1px solid #e0e0e0"},children:[(0,o.jsx)("h3",{style:{margin:0,fontSize:"1.2rem",color:"#333",display:"flex",alignItems:"center",gap:"8px"},children:"\uD83D\uDCAC Conversas"}),(0,o.jsxs)("p",{style:{margin:"5px 0 0 0",fontSize:"0.85rem",color:"#666"},children:[t.length," conversa",1!==t.length?"s":""]})]}),(0,o.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"10px 0"},children:[Object.entries(C).map(e=>{let[t,n]=e,p=s[t];return p?(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsxs)("div",{style:{padding:"10px 20px",display:"flex",alignItems:"center",gap:"10px",background:"#f5f7fa",borderBottom:"1px solid #e8eaf0"},children:[(0,o.jsx)(i.Z,{persona:p,personaId:t,size:"small"}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#333"},children:p.name}),(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#666"},children:[n.length," conversa",1!==n.length?"s":""]})]}),(0,o.jsx)("button",{onClick:()=>l(t),style:{background:"none",border:"none",color:"#1976d2",cursor:"pointer",fontSize:"1.2rem",padding:"4px",borderRadius:"4px"},title:"Nova conversa",children:"+"})]}),n.map(e=>(0,o.jsx)("div",{style:{padding:"12px 20px",borderBottom:"1px solid #f0f0f0",cursor:"pointer",background:e.id===r?"#e3f2fd":"transparent",borderLeft:e.id===r?"4px solid #1976d2":"4px solid transparent",position:"relative"},onMouseEnter:()=>b(e.id),onMouseLeave:()=>b(null),onClick:()=>d(e.id),children:u===e.id?(0,o.jsx)("div",{style:{display:"flex",gap:"5px"},children:(0,o.jsx)("input",{type:"text",value:g,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&z(),"Escape"===e.key&&D()},onBlur:z,autoFocus:!0,style:{flex:1,padding:"4px 8px",border:"1px solid #1976d2",borderRadius:"4px",fontSize:"0.9rem"}})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:e.id===r?"600":"normal",color:"#333",marginBottom:"4px",wordBreak:"break-word"},children:e.title}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#666",marginBottom:"4px",wordBreak:"break-word"},children:e.lastMessage}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)("span",{style:{fontSize:"0.7rem",color:"#999"},children:k(e.lastActivity)}),(0,o.jsxs)("span",{style:{fontSize:"0.7rem",color:"#999",background:"#f0f0f0",padding:"2px 6px",borderRadius:"10px"},children:[e.messageCount," msg"]})]}),m===e.id&&(0,o.jsxs)("div",{style:{position:"absolute",top:"8px",right:"8px",display:"flex",gap:"4px"},children:[(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),S(e)},style:{background:"white",border:"1px solid #ddd",borderRadius:"4px",padding:"4px 6px",fontSize:"0.7rem",cursor:"pointer"},title:"Renomear",children:"✏️"}),(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),confirm("Deseja excluir esta conversa?")&&a(e.id)},style:{background:"white",border:"1px solid #ddd",borderRadius:"4px",padding:"4px 6px",fontSize:"0.7rem",cursor:"pointer",color:"#d32f2f"},title:"Excluir",children:"\uD83D\uDDD1️"})]})]})},e.id))]},t):null}),0===t.length&&(0,o.jsxs)("div",{style:{padding:"40px 20px",textAlign:"center",color:"#666"},children:[(0,o.jsx)("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:"\uD83D\uDCAC"}),(0,o.jsx)("p",{children:"Nenhuma conversa ainda"}),(0,o.jsx)("p",{style:{fontSize:"0.85rem",margin:0},children:"Comece uma nova conversa selecionando uma persona"})]})]})]}),x&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.3)",zIndex:999},onClick:c})]})}}}]);