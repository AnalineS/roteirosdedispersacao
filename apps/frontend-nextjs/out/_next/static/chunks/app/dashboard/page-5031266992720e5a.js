(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{7264:function(e,s,t){Promise.resolve().then(t.bind(t,8616))},8616:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(7437),r=t(2265),i=t(4768),n=t(2983),o=t(8497),c=t(7648);function l(e){let{currentPersona:s}=e,{profile:t,hasProfile:i}=(0,o.Gr)(),[n,l]=(0,r.useState)("clinical-complete"),d=[{id:"first-chat",title:"Primeiro Contato",description:"Iniciou sua primeira conversa com um assistente virtual",icon:"\uD83D\uDCAC",earnedAt:"2025-01-01",category:"interaction",rarity:"common"},{id:"module-master",title:"Mestre dos M\xf3dulos",description:"Completou 3 m\xf3dulos educacionais em sequ\xeancia",icon:"\uD83C\uDF93",earnedAt:"2025-01-03",category:"learning",rarity:"rare"},{id:"consistency-king",title:"Rei da Consist\xeancia",description:"Estudou por 7 dias consecutivos",icon:"\uD83D\uDC51",earnedAt:"2025-01-05",category:"progress",rarity:"epic"},{id:"pqt-specialist",title:"Especialista PQT-U",description:"Dominou todos os aspectos da Poliquimioterapia \xdanica",icon:"\uD83D\uDC8A",earnedAt:"2025-01-07",category:"special",rarity:"legendary"}],m=[{id:"clinical-complete",title:"Trilha Cl\xednica Completa",description:"Caminho completo desde diagn\xf3stico at\xe9 acompanhamento do paciente com hansen\xedase",modules:["hanseniase-intro","diagnostico","pqt-fundamentos","farmacovigilancia","casos-clinicos"],difficulty:"Avan\xe7ado",estimatedTime:"2h 15min",progress:60,category:"clinical",recommendedFor:["M\xe9dicos","Enfermeiros","Estudantes de Medicina"]},{id:"pharmaceutical-focus",title:"Trilha Farmac\xeautica",description:"Foco em dispensa\xe7\xe3o, orienta\xe7\xf5es farmac\xeauticas e farmacovigilancia da PQT-U",modules:["pqt-fundamentos","dispensacao","farmacovigilancia"],difficulty:"Intermedi\xe1rio",estimatedTime:"1h 25min",progress:75,category:"pharmaceutical",recommendedFor:["Farmac\xeauticos","T\xe9cnicos em Farm\xe1cia"]},{id:"basic-introduction",title:"Introdu\xe7\xe3o \xe0 Hansen\xedase",description:"Conhecimentos fundamentais sobre a doen\xe7a, transmiss\xe3o e cuidados b\xe1sicos",modules:["hanseniase-intro","diagnostico"],difficulty:"B\xe1sico",estimatedTime:"40min",progress:100,category:"management",recommendedFor:["Profissionais de Sa\xfade","Estudantes","Gestores"]}],u=[{date:"2025-01-05",duration:25,modules:["pqt-fundamentos"],completed:!0},{date:"2025-01-04",duration:30,modules:["diagnostico"],completed:!0},{date:"2025-01-03",duration:20,modules:["hanseniase-intro"],completed:!0},{date:"2025-01-02",duration:15,modules:["hanseniase-intro"],completed:!1}],h=u.reduce((e,s)=>e+s.duration,0),x=h/u.length,g=m.find(e=>e.id===n),p=e=>{switch(e){case"common":return"#22c55e";case"rare":return"#3b82f6";case"epic":return"#8b5cf6";case"legendary":return"#f59e0b";default:return"#6b7280"}};return(0,a.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Ol\xe1",i&&t?", ".concat("professional"===t.type?"Dr(a)":"estudante","!"):"!"]}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:s?"Continuando com ".concat(s):"Seja bem-vindo ao seu painel educacional"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Perfil detectado"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-blue-600",children:i&&t?"".concat(t.type," • ").concat(t.focus):"Visitante"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFAF"})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[3,"/",5]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Meta Semanal"})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(60,"%")}})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"bg-orange-100 p-3 rounded-lg",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD25"})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:7}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Dias Seguidos"})]})]}),(0,a.jsx)("div",{className:"text-sm text-orange-600 font-medium",children:"Continue assim! \uD83D\uDE80"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,a.jsx)("span",{className:"text-2xl",children:"⏱️"})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[h,"min"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Tempo Total"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-green-600 font-medium",children:["~",Math.round(x),"min por sess\xe3o"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFC6"})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:d.length}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Conquistas"})]})]}),(0,a.jsx)("div",{className:"text-sm text-purple-600 font-medium",children:"+2 esta semana"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Sua Trilha de Aprendizagem"}),(0,a.jsx)("select",{value:n,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:m.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))})]}),g&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[(0,a.jsx)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:(e=>{switch(e){case"clinical":return"\uD83E\uDE7A";case"pharmaceutical":return"\uD83D\uDC8A";case"management":return"\uD83D\uDCCA";default:return"\uD83D\uDCDA"}})(g.category)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:g.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:g.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["\uD83D\uDCCA ",g.difficulty]}),(0,a.jsxs)("span",{children:["⏱️ ",g.estimatedTime]}),(0,a.jsxs)("span",{children:["\uD83C\uDFAF ",g.progress,"% completo"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Progresso da Trilha"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[g.modules.length," m\xf3dulos"]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full transition-all duration-700",style:{width:"".concat(g.progress,"%")}})}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-xs font-bold text-white drop-shadow",children:[g.progress,"%"]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recomendado para:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:g.recommendedFor.map((e,s)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:e},s))})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Atividade Recente"}),(0,a.jsx)("div",{className:"space-y-3",children:u.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.completed?"bg-green-500":"bg-yellow-500")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:new Date(e.date).toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"short"})}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.modules.join(", ")})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-medium text-gray-900",children:[e.duration,"min"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.completed?"✅ Conclu\xeddo":"⏸️ Em progresso"})]})]},s))})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Conquistas Recentes"}),(0,a.jsx)("div",{className:"space-y-3",children:d.slice(-3).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border-2 transition-all hover:shadow-md",style:{borderColor:p(e.rarity)+"40"},children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-xl",style:{backgroundColor:p(e.rarity)+"20"},children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate",children:e.description}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:new Date(e.earnedAt).toLocaleDateString("pt-BR")})]})]},e.id))}),(0,a.jsx)(c.default,{href:"/progress",className:"block mt-4 text-center py-2 bg-purple-50 text-purple-700 rounded-lg hover:bg-purple-100 transition-colors",children:"Ver todas as conquistas"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"A\xe7\xf5es R\xe1pidas"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(c.default,{href:"/chat",className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCAC"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-blue-900",children:"Continuar Chat"}),(0,a.jsxs)("div",{className:"text-sm text-blue-600",children:["Com ",s||"assistente virtual"]})]})]}),(0,a.jsxs)(c.default,{href:"/modules",className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDA"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-green-900",children:"Pr\xf3ximo M\xf3dulo"}),(0,a.jsx)("div",{className:"text-sm text-green-600",children:"Roteiro de Dispensa\xe7\xe3o"})]})]}),(0,a.jsxs)(c.default,{href:"/resources",className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDEE0️"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-orange-900",children:"Ferramentas"}),(0,a.jsx)("div",{className:"text-sm text-orange-600",children:"Calculadoras e checklists"})]})]})]})]})]})]})]})}function d(){let{personas:e,loading:s}=(0,n.H)(),[t,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{{let s=localStorage.getItem("selectedPersona");s&&e[s]&&o(s)}},[e]);let c=t?e[t]:null;return s?(0,a.jsx)("div",{style:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)("div",{children:"Carregando dashboard educacional..."})}):(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"#f8fafc"},children:[(0,a.jsx)(i.Z,{currentPersona:null==c?void 0:c.name}),(0,a.jsx)(l,{currentPersona:null==c?void 0:c.name})]})}},2983:function(e,s,t){"use strict";t.d(s,{H:function(){return l}});var a=t(2265),r=t(8223),i=t(3861);class n{generateKey(e,s){let t=s?JSON.stringify(s):"";return"".concat(e).concat(t)}isExpired(e){return Date.now()-e.timestamp>e.ttl}cleanup(){let e=[];this.cache.forEach((s,t)=>{this.isExpired(s)&&e.push(t)}),e.forEach(e=>this.cache.delete(e))}evictOldest(){if(this.cache.size>=this.maxSize){let e=null,s=1/0;this.cache.forEach((t,a)=>{t.timestamp<s&&(s=t.timestamp,e=a)}),e&&this.cache.delete(e)}}get(e,s){this.cleanup();let t=this.generateKey(e,s),a=this.cache.get(t);return!a||this.isExpired(a)?(a&&this.cache.delete(t),null):(a.timestamp=Date.now(),a.data)}set(e,s,t,a){this.evictOldest();let r=this.generateKey(e,t),i={data:s,timestamp:Date.now(),ttl:a||this.defaultTTL,key:r};this.cache.set(r,i)}delete(e,s){let t=this.generateKey(e,s);this.cache.delete(t)}clear(){this.cache.clear()}getStats(){let e=[];return this.cache.forEach((s,t)=>e.push(t)),{size:this.cache.size,maxSize:this.maxSize,keys:e,hitRate:0}}preload(e,s,t,a){this.set(e,s,t,a)}constructor(){this.cache=new Map,this.maxSize=50,this.defaultTTL=3e5}}let o=new n,c={get:()=>o.get("personas",void 0),set:e=>o.set("personas",e,void 0,18e5)};function l(){let[e,s]=(0,a.useState)({}),[t,n]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async function(){try{n(!0),l(null);let e=c.get();if(e){s(e),n(!1);return}let t=await (0,r.H7)(),a=(0,i.bt)(t);c.set(a),s(a)}catch(e){console.error("Erro ao carregar personas:",e),l(e instanceof Error?e.message:"Erro desconhecido")}finally{n(!1)}})()},[]),{personas:e,loading:t,error:o,getPersonaById:s=>e[s]||null,getPersonasList:()=>Object.entries(e).map(e=>{let[s,t]=e;return{id:s,persona:t}}),getValidPersonasCount:()=>Object.keys(e).length,refetch:async()=>{try{n(!0),l(null);let e=await (0,r.H7)(),t=(0,i.bt)(e);s(t)}catch(e){console.error("Erro ao carregar personas:",e),l(e instanceof Error?e.message:"Erro desconhecido")}finally{n(!1)}}}}},8497:function(e,s,t){"use strict";t.d(s,{Gr:function(){return n},So:function(){return o}});var a=t(2265);let r="userProfile",i={language:"simple",notifications:!0,theme:"auto"};function n(){let[e,s]=(0,a.useState)(null),[t,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{let e=localStorage.getItem(r);if(e){let t=JSON.parse(e);"1.0"===t.version?s(t.profile):(console.log("Migrando perfil para nova vers\xe3o"),localStorage.removeItem(r))}}catch(e){console.error("Erro ao carregar perfil do usu\xe1rio:",e),localStorage.removeItem(r)}finally{n(!1)}},[]);let o=t=>{try{var a,n;let o={...t,preferences:{...i,...t.preferences},history:{lastPersona:t.selectedPersona||"ga",conversationCount:((null==e?void 0:null===(a=e.history)||void 0===a?void 0:a.conversationCount)||0)+1,lastAccess:new Date().toISOString(),preferredTopics:(null==e?void 0:null===(n=e.history)||void 0===n?void 0:n.preferredTopics)||[]}},c={version:"1.0",profile:o,savedAt:new Date().toISOString()};localStorage.setItem(r,JSON.stringify(c)),s(o)}catch(e){console.error("Erro ao salvar perfil do usu\xe1rio:",e)}};return{profile:e,isLoading:t,saveProfile:o,updateProfile:s=>{var t,a,r;e&&o({...e,...s,history:{lastPersona:s.selectedPersona||(null===(t=e.history)||void 0===t?void 0:t.lastPersona)||"ga",conversationCount:(null===(a=e.history)||void 0===a?void 0:a.conversationCount)||0,lastAccess:new Date().toISOString(),preferredTopics:(null===(r=e.history)||void 0===r?void 0:r.preferredTopics)||[]}})},clearProfile:()=>{try{localStorage.removeItem(r),s(null)}catch(e){console.error("Erro ao limpar perfil do usu\xe1rio:",e)}},getRecommendedPersona:()=>{if(!e)return"ga";let{type:s,focus:t,history:a}=e;return(null==a?void 0:a.lastPersona)&&a.conversationCount>2?a.lastPersona:"professional"===s||"student"===s?"technical"===t?"dr_gasnelio":"practical"===t?"ga":"dr_gasnelio":"technical"===t?"dr_gasnelio":"ga"},hasProfile:null!==e}}function o(){let e=["posologia","farmacocin\xe9tica","mecanismo de a\xe7\xe3o","intera\xe7\xf5es medicamentosas","farmacologia cl\xednica","protocolo","diretrizes t\xe9cnicas","evid\xeancia cient\xedfica","dose","administra\xe7\xe3o","monitoriza\xe7\xe3o","contraindica\xe7\xe3o"],s=["como tomar","efeitos","normal","preocupado","posso","faz mal","\xe9 perigoso","vai passar","medo","ansioso","fam\xedlia","cuidador","ajudar","explicar","simples","entender"];return{detectProfile:t=>{let a=t.toLowerCase(),r=e.reduce((e,s)=>e+(a.includes(s)?1:0),0),i=s.reduce((e,s)=>e+(a.includes(s)?1:0),0),n=r+i,o="ga",c=.5,l="Baseado no seu perfil, recomendo come\xe7ar com G\xe1 para uma abordagem mais acolhedora.";return n>0&&(r>i?(o="dr_gasnelio",c=Math.min(.9,.6+r/(n+2)),l="Detectei interesse em informa\xe7\xf5es t\xe9cnicas. Dr. Gasnelio \xe9 especialista em aspectos cient\xedficos."):i>r?(o="ga",c=Math.min(.9,.6+i/(n+2)),l="Percebo que busca informa\xe7\xf5es pr\xe1ticas e acolhedoras. G\xe1 \xe9 ideal para esse tipo de orienta\xe7\xe3o."):(c=.5,l="Ambos especialistas podem ajudar. G\xe1 oferece explica\xe7\xf5es mais simples, Dr. Gasnelio \xe9 mais t\xe9cnico.")),{recommended:o,confidence:c,explanation:l}}}}},8223:function(e,s,t){"use strict";t.d(s,{$N:function(){return n},H7:function(){return r},bE:function(){return i}});let a=t(257).env.NEXT_PUBLIC_API_URL||"https://roteiro-dispensacao-api-1016586236354.us-central1.run.app";async function r(){try{let e=await fetch("".concat(a,"/api/personas"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(e){throw console.error("Erro ao buscar personas:",e),e}}async function i(e){try{let s=await fetch("".concat(a,"/api/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return await s.json()}catch(e){throw console.error("Erro ao enviar mensagem:",e),e}}async function n(e){try{let s=await fetch("".concat(a,"/api/scope"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e})});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return await s.json()}catch(e){throw console.error("Erro ao detectar escopo:",e),e}}}},function(e){e.O(0,[29,448,145,768,971,117,744],function(){return e(e.s=7264)}),_N_E=e.O()}]);