"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{1610:function(e,a,t){t.r(a),t.d(a,{default:function(){return i}});var s=t(7437),n=t(2265);let o=e=>e.replace(/[<>"'&]/g,e=>({"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","&":"&amp;"})[e]||e);function i(e){var a;let{persona:t,personaId:i,currentInput:r,onSuggestionClick:l,isVisible:d=!0,onClose:c}=e,[u,p]=(0,n.useState)([]),[f,x]=(0,n.useState)(!1),[g,m]=(0,n.useState)(-1),[h,b]=(0,n.useState)(!1),v=(0,n.useMemo)(()=>({dose_calculation:["Como calcular a dose correta de PQT-U?","Quais fatores considerar na dosagem?","Como ajustar doses para diferentes idades?"],adverse_reactions:["Quais s\xe3o os efeitos colaterais mais comuns?","Como identificar rea\xe7\xf5es adversas graves?","O que fazer quando paciente tem alergia?"],clinical_cases:["Como diagnosticar hansen\xedase multibacilar?","Diferen\xe7as entre PB e MB?","Quando iniciar o tratamento?"],patient_education:["Como explicar o tratamento ao paciente?","Como motivar ades\xe3o ao tratamento?","Orienta\xe7\xf5es para fam\xedlia do paciente"],dispensation:["Protocolo correto de dispensa\xe7\xe3o","Como organizar cronograma mensal?","Documenta\xe7\xe3o necess\xe1ria"]}),[]),y=(0,n.useCallback)(e=>{if(!e||"string"!=typeof e)return[];let a=o(e).toLowerCase().trim(),s=[];if((a.includes("dose")||a.includes("quantidade")||a.includes("mg"))&&s.push(...v.dose_calculation),(a.includes("efeito")||a.includes("rea\xe7\xe3o")||a.includes("alergia"))&&s.push(...v.adverse_reactions),(a.includes("diagnos")||a.includes("sintoma")||a.includes("caso"))&&s.push(...v.clinical_cases),(a.includes("paciente")||a.includes("fam\xedlia")||a.includes("explicar"))&&s.push(...v.patient_education),(a.includes("dispensar")||a.includes("entregar")||a.includes("cronograma"))&&s.push(...v.dispensation),0===s.length){var n;s=(null===(n=t.example_questions)||void 0===n?void 0:n.slice(0,4))||[]}return Array.from(new Set(s)).slice(0,4)},[v,t.example_questions]);(0,n.useEffect)(()=>{b(!0);let e=setTimeout(()=>{try{if(r.length>2){let e=y(r);p(e),x(!0)}else if(0===r.length){var e;p((null===(e=t.example_questions)||void 0===e?void 0:e.slice(0,4))||[]),x(!0)}else x(!1);m(-1)}catch(e){console.error("Erro ao detectar contexto:",e),p([]),x(!1)}finally{b(!1)}},150);return()=>clearTimeout(e)},[r,t.example_questions,y]);let k=(0,n.useCallback)(e=>{switch(e.key){case"ArrowDown":e.preventDefault(),m(e=>(e+1)%u.length);break;case"ArrowUp":e.preventDefault(),m(e=>e<=0?u.length-1:e-1);break;case"Enter":e.preventDefault(),g>=0&&u[g]&&l(u[g]);break;case"Escape":e.preventDefault(),null==c||c()}},[u,g,l,c]),j=(0,n.useCallback)(e=>{try{l(e)}catch(e){console.error("Erro ao aplicar sugest\xe3o:",e)}},[l]);return d&&f&&(0!==u.length||h)?(0,s.jsxs)("div",{role:"listbox","aria-label":"Sugest\xf5es de perguntas","aria-live":"polite",onKeyDown:k,tabIndex:-1,style:{position:"absolute",bottom:"100%",left:0,right:0,background:"white",border:"1px solid #e0e0e0",borderRadius:"12px 12px 0 0",boxShadow:"0 -4px 12px rgba(0,0,0,0.1)",maxHeight:"200px",overflowY:"auto",zIndex:1e3},children:[(0,s.jsx)("div",{style:{padding:"12px 16px",borderBottom:"1px solid #f0f0f0",background:"#f8f9fa",borderRadius:"12px 12px 0 0"},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,s.jsx)("span",{style:{fontSize:"1rem"},children:"\uD83D\uDCA1"}),(0,s.jsx)("span",{style:{fontSize:"0.85rem",fontWeight:"bold",color:"#1976d2"},children:r.length>2?"Sugest\xf5es relacionadas":"Perguntas frequentes"})]})}),(0,s.jsx)("div",{style:{padding:"8px 0"},children:h?(0,s.jsx)("div",{style:{padding:"16px",textAlign:"center",color:"#666",fontSize:"0.9rem"},children:(0,s.jsx)("span",{children:"Carregando sugest\xf5es..."})}):u.map((e,a)=>{let t=a===g;return(0,s.jsx)("button",{role:"option","aria-selected":t,"aria-label":"Sugest\xe3o ".concat(a+1," de ").concat(u.length,": ").concat(e),onClick:()=>j(e),onMouseEnter:()=>m(a),onMouseLeave:()=>m(-1),style:{width:"100%",padding:"12px 16px",border:"none",background:t?"#e3f2fd":"transparent",textAlign:"left",cursor:"pointer",fontSize:"0.9rem",color:"#333",transition:"all 0.2s ease",borderBottom:a<u.length-1?"1px solid #f5f5f5":"none",outline:t?"2px solid #1976d2":"none",outlineOffset:"-2px"},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[(0,s.jsx)("span",{style:{fontSize:"0.8rem",color:"#1976d2",marginTop:"2px",flexShrink:0},children:"?"}),(0,s.jsx)("span",{style:{lineHeight:"1.4",wordBreak:"break-word"},children:e})]})},"".concat(i,"-suggestion-").concat(a))})}),(0,s.jsx)("div",{style:{padding:"8px 16px",background:"#f8f9fa",borderTop:"1px solid #f0f0f0",fontSize:"0.75rem",color:"#666"},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,s.jsx)("span",{children:t.avatar}),(0,s.jsxs)("span",{children:["Especialidade: ",(null===(a=t.expertise)||void 0===a?void 0:a.slice(0,2).join(", "))||t.target_audience]})]})})]}):null}}}]);